import{a1 as R,a0 as Nt,R as Ft,S as Ht,T as o,U as Gt,V as Dt,W as $,X as J,Y as Rt,Z as $t}from"./theme-terminal-ylQyTtHj.js";import{a as zt}from"./ext-split-Bwep5wk0.js";var X,nt;function Bt(){if(nt)return X;nt=1;var st="Expected a function",i="__lodash_hash_undefined__",s="[object Function]",n="[object GeneratorFunction]",h="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,g=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,b=typeof R=="object"&&R&&R.Object===Object&&R,f=typeof self=="object"&&self&&self.Object===Object&&self,j=b||f||Function("return this")();function L(t,e){return t==null?void 0:t[e]}function N(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var B=Array.prototype,V=Function.prototype,F=Object.prototype,O=j["__core-js_shared__"],v=function(){var t=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),H=V.toString,S=F.hasOwnProperty,a=F.toString,P=RegExp("^"+H.call(S).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=j.Symbol,K=B.splice,U=Z(j,"Map"),_=Z(Object,"create"),p=T?T.prototype:void 0,C=p?p.toString:void 0;function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var c=t[e];this.set(c[0],c[1])}}function rt(){this.__data__=_?_(null):{}}function it(t){return this.has(t)&&delete this.__data__[t]}function at(t){var e=this.__data__;if(_){var r=e[t];return r===i?void 0:r}return S.call(e,t)?e[t]:void 0}function lt(t){var e=this.__data__;return _?e[t]!==void 0:S.call(e,t)}function ht(t,e){var r=this.__data__;return r[t]=_&&e===void 0?i:e,this}M.prototype.clear=rt,M.prototype.delete=it,M.prototype.get=at,M.prototype.has=lt,M.prototype.set=ht;function A(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var c=t[e];this.set(c[0],c[1])}}function ct(){this.__data__=[]}function pt(t){var e=this.__data__,r=G(e,t);if(r<0)return!1;var c=e.length-1;return r==c?e.pop():K.call(e,r,1),!0}function ut(t){var e=this.__data__,r=G(e,t);return r<0?void 0:e[r][1]}function ft(t){return G(this.__data__,t)>-1}function dt(t,e){var r=this.__data__,c=G(r,t);return c<0?r.push([t,e]):r[c][1]=e,this}A.prototype.clear=ct,A.prototype.delete=pt,A.prototype.get=ut,A.prototype.has=ft,A.prototype.set=dt;function x(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var c=t[e];this.set(c[0],c[1])}}function gt(){this.__data__={hash:new M,map:new(U||A),string:new M}}function yt(t){return D(this,t).delete(t)}function mt(t){return D(this,t).get(t)}function bt(t){return D(this,t).has(t)}function St(t,e){return D(this,t).set(t,e),this}x.prototype.clear=gt,x.prototype.delete=yt,x.prototype.get=mt,x.prototype.has=bt,x.prototype.set=St;function G(t,e){for(var r=t.length;r--;)if(At(t[r][0],e))return r;return-1}function _t(t,e){e=Ot(e,t)?[e]:Et(e);for(var r=0,c=e.length;t!=null&&r<c;)t=t[xt(e[r++])];return r&&r==c?t:void 0}function wt(t){if(!tt(t)||Pt(t))return!1;var e=Tt(t)||N(t)?P:E;return e.test(jt(t))}function Ct(t){if(typeof t=="string")return t;if(q(t))return C?C.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Et(t){return Q(t)?t:Mt(t)}function D(t,e){var r=t.__data__;return vt(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Z(t,e){var r=L(t,e);return wt(r)?r:void 0}function Ot(t,e){if(Q(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||q(t)?!0:u.test(t)||!l.test(t)||e!=null&&t in Object(e)}function vt(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Pt(t){return!!v&&v in t}var Mt=W(function(t){t=It(t);var e=[];return g.test(t)&&e.push(""),t.replace(d,function(r,c,k,I){e.push(k?I.replace(m,"$1"):c||r)}),e});function xt(t){if(typeof t=="string"||q(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function jt(t){if(t!=null){try{return H.call(t)}catch{}try{return t+""}catch{}}return""}function W(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(st);var r=function(){var c=arguments,k=e?e.apply(this,c):c[0],I=r.cache;if(I.has(k))return I.get(k);var et=t.apply(this,c);return r.cache=I.set(k,et),et};return r.cache=new(W.Cache||x),r}W.Cache=x;function At(t,e){return t===e||t!==t&&e!==e}var Q=Array.isArray;function Tt(t){var e=tt(t)?a.call(t):"";return e==s||e==n}function tt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function kt(t){return!!t&&typeof t=="object"}function q(t){return typeof t=="symbol"||kt(t)&&a.call(t)==h}function It(t){return t==null?"":Ct(t)}function Lt(t,e,r){var c=t==null?void 0:_t(t,e);return c===void 0?r:c}return X=Lt,X}var Vt=Bt();const w=Nt(Vt),Y=Ft(),z=class z extends Ht.Component{constructor(i){super(i),Gt.forEach(s=>{this[s]=this[s].bind(this)}),this.debounce=Dt}isInShadow(i){let s=i&&i.parentNode;for(;s;){if(s.toString()==="[object ShadowRoot]")return!0;s=s.parentNode}return!1}componentDidMount(){const{className:i,onBeforeLoad:s,mode:n,focus:h,theme:l,fontSize:u,value:g,defaultValue:d,cursorStart:y,showGutter:m,wrapEnabled:E,showPrintMargin:b,scrollMargin:f=[0,0,0,0],keyboardHandler:j,onLoad:L,commands:N,annotations:B,markers:V,splits:F}=this.props;this.editor=Y.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme(`ace/theme/${l}`),s&&s(Y);const O=Object.keys(this.props.editorProps),v=new zt.Split(this.editor.container,`ace/theme/${l}`,F);this.editor.env.split=v,this.splitEditor=v.getEditor(0),this.split=v,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);const H=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),v.forEach((a,P)=>{for(let p=0;p<O.length;p++)a[O[p]]=this.props.editorProps[O[p]];const T=w(d,P),K=w(g,P,"");a.session.setUndoManager(new Y.UndoManager),a.setTheme(`ace/theme/${l}`),a.renderer.setScrollMargin(f[0],f[1],f[2],f[3]),a.getSession().setMode(`ace/mode/${n}`),a.setFontSize(u),a.renderer.setShowGutter(m),a.getSession().setUseWrapMode(E),a.setShowPrintMargin(b),a.on("focus",p=>this.onFocus(p,P)),a.on("blur",this.onBlur),a.on("input",this.onInput),a.on("copy",this.onCopy),a.on("paste",this.onPaste),a.on("change",this.onChange),a.getSession().selection.on("changeSelection",this.onSelectionChange),a.getSession().selection.on("changeCursor",this.onCursorChange),a.session.on("changeScrollTop",this.onScroll),a.setValue(T===void 0?K:T,y);const U=w(B,P,[]),_=w(V,P,[]);a.getSession().setAnnotations(U),_&&_.length>0&&this.handleMarkers(_,a);for(let p=0;p<$.length;p++){const C=$[p];H.hasOwnProperty(C)?a.setOption(C,this.props[C]):this.props[C]&&console.warn(`ReaceAce: editor option ${C} was activated but not found. Did you need to import a related tool or did you possibly mispell the option?`)}this.handleOptions(this.props,a),Array.isArray(N)&&N.forEach(p=>{typeof p.exec=="string"?a.commands.bindKey(p.bindKey,p.exec):a.commands.addCommand(p)}),j&&a.setKeyboardHandler("ace/keyboard/"+j)}),i&&(this.refEditor.className+=" "+i),h&&this.splitEditor.focus();const S=this.editor.env.split;S.setOrientation(this.props.orientation==="below"?S.BELOW:S.BESIDE),S.resize(!0),L&&L(S)}componentDidUpdate(i){const s=i,n=this.props,h=this.editor.env.split;if(n.splits!==s.splits&&h.setSplits(n.splits),n.orientation!==s.orientation&&h.setOrientation(n.orientation==="below"?h.BELOW:h.BESIDE),h.forEach((l,u)=>{n.mode!==s.mode&&l.getSession().setMode("ace/mode/"+n.mode),n.keyboardHandler!==s.keyboardHandler&&(n.keyboardHandler?l.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):l.setKeyboardHandler(null)),n.fontSize!==s.fontSize&&l.setFontSize(n.fontSize),n.wrapEnabled!==s.wrapEnabled&&l.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==s.showPrintMargin&&l.setShowPrintMargin(n.showPrintMargin),n.showGutter!==s.showGutter&&l.renderer.setShowGutter(n.showGutter);for(let b=0;b<$.length;b++){const f=$[b];n[f]!==s[f]&&l.setOption(f,n[f])}J(n.setOptions,s.setOptions)||this.handleOptions(n,l);const g=w(n.value,u,"");if(l.getValue()!==g){this.silent=!0;const b=l.session.selection.toJSON();l.setValue(g,n.cursorStart),l.session.selection.fromJSON(b),this.silent=!1}const d=w(n.annotations,u,[]),y=w(s.annotations,u,[]);J(d,y)||l.getSession().setAnnotations(d);const m=w(n.markers,u,[]),E=w(s.markers,u,[]);!J(m,E)&&Array.isArray(m)&&this.handleMarkers(m,l)}),n.className!==s.className){const u=this.refEditor.className.trim().split(" ");s.className.trim().split(" ").forEach(d=>{const y=u.indexOf(d);u.splice(y,1)}),this.refEditor.className=" "+n.className+" "+u.join(" ")}n.theme!==s.theme&&h.setTheme("ace/theme/"+n.theme),n.focus&&!s.focus&&this.splitEditor.focus(),(n.height!==this.props.height||n.width!==this.props.width)&&this.editor.resize()}componentWillUnmount(){this.editor.destroy(),this.editor=null}onChange(i){if(this.props.onChange&&!this.silent){const s=[];this.editor.env.split.forEach(n=>{s.push(n.getValue())}),this.props.onChange(s,i)}}onSelectionChange(i){if(this.props.onSelectionChange){const s=[];this.editor.env.split.forEach(n=>{s.push(n.getSelection())}),this.props.onSelectionChange(s,i)}}onCursorChange(i){if(this.props.onCursorChange){const s=[];this.editor.env.split.forEach(n=>{s.push(n.getSelection())}),this.props.onCursorChange(s,i)}}onFocus(i,s){this.props.onFocus&&this.props.onFocus(i,s)}onInput(i){this.props.onInput&&this.props.onInput(i)}onBlur(i){this.props.onBlur&&this.props.onBlur(i)}onCopy(i){this.props.onCopy&&this.props.onCopy(i)}onPaste(i){this.props.onPaste&&this.props.onPaste(i)}onScroll(){this.props.onScroll&&this.props.onScroll(this.editor)}handleOptions(i,s){const n=Object.keys(i.setOptions);for(let h=0;h<n.length;h++)s.setOption(n[h],i.setOptions[n[h]])}handleMarkers(i,s){let n=s.getSession().getMarkers(!0);for(const h in n)n.hasOwnProperty(h)&&s.getSession().removeMarker(n[h].id);n=s.getSession().getMarkers(!1);for(const h in n)n.hasOwnProperty(h)&&s.getSession().removeMarker(n[h].id);i.forEach(({startRow:h,startCol:l,endRow:u,endCol:g,className:d,type:y,inFront:m=!1})=>{const E=new Rt.Range(h,l,u,g);s.getSession().addMarker(E,d,y,m)})}updateRef(i){this.refEditor=i}render(){const{name:i,width:s,height:n,style:h}=this.props,l={width:s,height:n,...h};return $t.jsx("div",{ref:this.updateRef,id:i,style:l})}};z.propTypes={className:o.string,debounceChangePeriod:o.number,defaultValue:o.arrayOf(o.string),focus:o.bool,fontSize:o.oneOfType([o.number,o.string]),height:o.string,mode:o.string,name:o.string,onBlur:o.func,onChange:o.func,onCopy:o.func,onFocus:o.func,onInput:o.func,onLoad:o.func,onPaste:o.func,onScroll:o.func,orientation:o.string,showGutter:o.bool,splits:o.number,theme:o.string,value:o.arrayOf(o.string),width:o.string,onSelectionChange:o.func,onCursorChange:o.func,onBeforeLoad:o.func,minLines:o.number,maxLines:o.number,readOnly:o.bool,highlightActiveLine:o.bool,tabSize:o.number,showPrintMargin:o.bool,cursorStart:o.number,editorProps:o.object,setOptions:o.object,style:o.object,scrollMargin:o.array,annotations:o.array,markers:o.array,keyboardHandler:o.string,wrapEnabled:o.bool,enableBasicAutocompletion:o.oneOfType([o.bool,o.array]),enableLiveAutocompletion:o.oneOfType([o.bool,o.array]),commands:o.array},z.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1};let ot=z;export{ot as S};
